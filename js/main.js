import{buildCanvas as g,renderCanvasFrame as v,renderSvg as $}from"./renderer.js";import{configureLayout as E,rotateTransform as C,shearTransform as q,scaleTransform as j,pointToCube as z}from"./layout.js";import{makeGrid as I}from"./grid.js";import*as L from"./subset.js";import*as S from"./hex.js";import{getFloatValue as B,getIntValue as F,getRadioValue as k,getStringValue as w,getCheckbox as M}from"./utils.js";import{thousandthRound as u}from"./math.js";const X="svghg",Y="canvhg",A=["line","ring","hexagon","cone","rhombbus"],D="shapes",N=E({x:45,y:45},{x:90,y:90},[j(5,5)]),O=I({size:5}),P=S.makeNode({q:1,r:-1,s:0},"Cell"),G={q:-2,r:4,s:-2},H=[L.line({source:P,toward:G}),L.ring({source:P,size:3}),L.hexagon({source:P,size:3}),L.cone({source:P,toward:G,size:4}),L.rhombus({source:P,toward:G,size:3})],J=document.getElementById(X),K=document.getElementById("st");export const inputs=document.querySelector('form[id="params"]'),getForm=()=>[E({x:F("orx"),y:F("ory")},{x:F("csx"),y:F("csy")},[C(B("orientation")*Math.PI/12),q(B("shx"),B("shy")),j(F("hsx"),F("hsy"))]),I({shape:k("shape"),size:[F("gs1"),F("gs2")],populate:!0}),M("debug")],rendSvg=()=>{const e=getForm();let t;for(document.getElementById(D).style.width=`${w("csx")}px`;t=J.lastChild;)J.removeChild(t);$(X,...e)},makeCanv=()=>{const[e,t]=getForm(),o=g(Y,e),s=o.getContext("2d");return document.getElementById(Y).appendChild(o),v(s,e,t),s},rendCanv=e=>{v(e,...getForm())};document.addEventListener("DOMContentLoaded",(()=>{rendSvg();const e=document.getElementById(D);A.forEach(((t,o)=>{const s=document.createElement("div"),r=H[o];s.id=t,s.style.display="inline-block",e.appendChild(s),$(t,N,O);s.querySelector(`[data-hex-node-id="${P.id}"]`).classList.add("source"),r.forEach((e=>{const o=document.querySelector(`#${t} [data-hex-node-id="${e.id}"]`);o&&o.classList.add("hilit")}))}))})),inputs.addEventListener("input",(()=>{rendSvg()})),J.addEventListener("mouseup",(e=>{if(!e.target.matches(".cell"))return;const[t]=getForm(),o={x:e.offsetX,y:e.offsetY},{q:s,r:r,s:n}=z(o,t),d=`x: ${e.offsetX}, y: ${e.offsetY}`,i=`q: ${u(s)}, r: ${u(r)}, s: ${u(n)}`,a=e.target.getAttribute("data-hex-node-id");K.innerText=`click coordinates: ${d}\n  fractional qrs coordinates: ${i}\n  hex cell coordinates: ${a}`}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidWlsZENhbnZhcyIsInJlbmRlckNhbnZhc0ZyYW1lIiwicmVuZGVyU3ZnIiwiY29uZmlndXJlTGF5b3V0Iiwicm90YXRlVHJhbnNmb3JtIiwic2hlYXJUcmFuc2Zvcm0iLCJzY2FsZVRyYW5zZm9ybSIsInBvaW50VG9DdWJlIiwibWFrZUdyaWQiLCJTdWJzZXQiLCJIZXgiLCJnZXRGbG9hdFZhbHVlIiwiZ2V0SW50VmFsdWUiLCJnZXRSYWRpb1ZhbHVlIiwiZ2V0U3RyaW5nVmFsdWUiLCJnZXRDaGVja2JveCIsInRob3VzYW5kdGhSb3VuZCIsInN2Z0dyaWRUYXJnZXQiLCJjYW52YXNHcmlkVGFyZ2V0Iiwic2hhcGVzIiwic2hhcGVzSG9sZGVyIiwic2hhcGVMYXlvdXRDb25maWciLCJ4IiwieSIsInNoYXBlR3JpZCIsInNpemUiLCJzb3VyY2UiLCJtYWtlTm9kZSIsInEiLCJyIiwicyIsInRvd2FyZCIsInN1YnNldHMiLCJsaW5lIiwicmluZyIsImhleGFnb24iLCJjb25lIiwicmhvbWJ1cyIsInN2Z1JlbmRlckNvbnRleHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3QiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Rm9ybSIsIk1hdGgiLCJQSSIsInNoYXBlIiwicG9wdWxhdGUiLCJyZW5kU3ZnIiwiY29uZmlnIiwibGFzdCIsInN0eWxlIiwid2lkdGgiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIm1ha2VDYW52IiwibGF5b3V0IiwiZ3JpZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJhcHBlbmRDaGlsZCIsInJlbmRDYW52IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhvbGRlciIsImZvckVhY2giLCJpbmRleCIsInNoYXBlQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInN1YnNldCIsImlkIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJjZWxsIiwiZXYiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY2xpY2tYWSIsIm9mZnNldFgiLCJvZmZzZXRZIiwieHkiLCJwdGMiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiXSwic291cmNlcyI6WyIuLi9zcmMvbWFpbi50cyJdLCJtYXBwaW5ncyI6InNCQVFTQSx1QkFBYUMsZUFBbUJDLE1BQWlCLDBDQUd4REMscUJBQ0FDLG9CQUNBQyxvQkFDQUMsaUJBQ0FDLE1BRUssaUNBQ3NCQyxNQUFnQixzQkFDakNDLE1BQVksd0JBQ1pDLE1BQVMsbUNBQ1pDLGlCQUFlQyxtQkFBYUMsb0JBQWVDLGlCQUFnQkMsTUFBbUIsdUNBQzlFQyxNQUF1QixZQUVoQyxNQUFNQyxFQUFnQixRQUNwQkMsRUFBbUIsU0FDbkJDLEVBQVMsQ0FBQyxPQUFRLE9BQVEsVUFBVyxPQUFRLFlBQzdDQyxFQUFlLFNBQ2ZDLEVBQWtDbEIsRUFBZ0IsQ0FBRW1CLEVBQUcsR0FBSUMsRUFBRyxJQUFNLENBQUVELEVBQUcsR0FBSUMsRUFBRyxJQUFNLENBQ3BGakIsRUFBZSxFQUFHLEtBRXBCa0IsRUFBcUJoQixFQUFTLENBQUVpQixLQUFNLElBQ3RDQyxFQUFTaEIsRUFBSWlCLFNBQVMsQ0FBRUMsRUFBRyxFQUFHQyxHQUFJLEVBQUdDLEVBQUcsR0FBSyxRQUM3Q0MsRUFBUyxDQUFFSCxHQUFJLEVBQUdDLEVBQUcsRUFBR0MsR0FBSSxHQUM1QkUsRUFBVSxDQUNSdkIsRUFBT3dCLEtBQUssQ0FBRVAsU0FBUUssV0FDdEJ0QixFQUFPeUIsS0FBSyxDQUFFUixTQUFRRCxLQUFNLElBQzVCaEIsRUFBTzBCLFFBQVEsQ0FBRVQsU0FBUUQsS0FBTSxJQUMvQmhCLEVBQU8yQixLQUFLLENBQUVWLFNBQVFLLFNBQVFOLEtBQU0sSUFDcENoQixFQUFPNEIsUUFBUSxDQUFFWCxTQUFRSyxTQUFRTixLQUFNLEtBRXpDYSxFQUFtQkMsU0FBU0MsZUFBZXZCLEdBQzNDd0IsRUFBS0YsU0FBU0MsZUFBZSxhQUN4QixNQUFNRSxPQUFTSCxTQUFTSSxjQUFjLHFCQUMzQ0MsUUFBVSxJQUNELENBQ0x6QyxFQUNFLENBQUVtQixFQUFHVixFQUFZLE9BQVFXLEVBQUdYLEVBQVksUUFDeEMsQ0FBRVUsRUFBR1YsRUFBWSxPQUFRVyxFQUFHWCxFQUFZLFFBQ3hDLENBQ0VSLEVBQWlCTyxFQUFjLGVBQWlCa0MsS0FBS0MsR0FBTSxJQUMzRHpDLEVBQWVNLEVBQWMsT0FBUUEsRUFBYyxRQUNuREwsRUFBZU0sRUFBWSxPQUFRQSxFQUFZLFVBR25ESixFQUFTLENBQ1B1QyxNQUFPbEMsRUFBYyxTQUNyQlksS0FBTSxDQUFDYixFQUFZLE9BQVFBLEVBQVksUUFDdkNvQyxVQUFVLElBRVpqQyxFQUFZLFVBR2hCa0MsUUFBVSxLQUNSLE1BQU1DLEVBQVNOLFVBRWYsSUFBSU8sRUFFSixJQUhXWixTQUFTQyxlQUFlcEIsR0FFNUJnQyxNQUFNQyxNQUFRLEdBQUd2QyxFQUFlLFdBQy9CcUMsRUFBT2IsRUFBaUJnQixXQUM5QmhCLEVBQWlCaUIsWUFBWUosR0FFL0JqRCxFQUFVZSxLQUFrQmlDLEVBQU8sRUFFckNNLFNBQVcsS0FDVCxNQUFPQyxFQUFRQyxHQUFRZCxVQUNyQmUsRUFBUzNELEVBQVlrQixFQUFrQnVDLEdBQ3ZDRyxFQUFNRCxFQUFPRSxXQUFXLE1BSTFCLE9BSGlCdEIsU0FBU0MsZUFBZXRCLEdBQzVCNEMsWUFBWUgsR0FDekIxRCxFQUFrQjJELEVBQUtILEVBQVFDLEdBQ3hCRSxDQUFHLEVBRVpHLFNBQVlILElBQ1YzRCxFQUFrQjJELEtBQVFoQixVQUFVLEVBS3hDTCxTQUFTeUIsaUJBQWlCLG9CQUFvQixLQUM1Q2YsVUFHQSxNQUFNZ0IsRUFBUzFCLFNBQVNDLGVBQWVwQixHQUN2Q0QsRUFBTytDLFNBQVEsQ0FBQ25CLEVBQU9vQixLQUNyQixNQUFNQyxFQUFpQjdCLFNBQVM4QixjQUFjLE9BQzVDQyxFQUFTdEMsRUFBUW1DLEdBQ25CQyxFQUFlRyxHQUFLeEIsRUFDcEJxQixFQUFlaEIsTUFBTW9CLFFBQVUsZUFDL0JQLEVBQU9ILFlBQVlNLEdBQ25CbEUsRUFBVTZDLEVBQU8xQixFQUFtQkcsR0FDbEI0QyxFQUFlekIsY0FDL0Isc0JBQXNCakIsRUFBTzZDLFFBRXJCRSxVQUFVQyxJQUFJLFVBQ3hCSixFQUFPSixTQUFTUyxJQUNkLE1BQU1DLEVBQU9yQyxTQUFTSSxjQUNwQixJQUFJSSx3QkFBNEI0QixFQUFFSixRQUVoQ0ssR0FDRkEsRUFBS0gsVUFBVUMsSUFBSSxRLEdBRXJCLEdBQ0YsSUFHSmhDLE9BQU9zQixpQkFBaUIsU0FBUyxLQUMvQmYsU0FBUyxJQUdYWCxFQUFpQjBCLGlCQUFpQixXQUFZYSxJQUM1QyxJQUFNQSxFQUFHQyxPQUFtQkMsUUFBUSxTQUFVLE9BQzlDLE1BQU90QixHQUFVYixVQUNmb0MsRUFBb0IsQ0FBRTFELEVBQUd1RCxFQUFHSSxRQUFTMUQsRUFBR3NELEVBQUdLLFVBQzNDdEQsRUFBRUEsRUFBQ0MsRUFBRUEsRUFBQ0MsRUFBRUEsR0FBTXZCLEVBQVl5RSxFQUFTdkIsR0FDbkMwQixFQUFLLE1BQU1OLEVBQUdJLGVBQWVKLEVBQUdLLFVBQ2hDRSxFQUFNLE1BQU1wRSxFQUFnQlksVUFBVVosRUFBZ0JhLFVBQVViLEVBQWdCYyxLQUNoRjhDLEVBQVFDLEVBQUdDLE9BQW1CTyxhQUFhLG9CQUM3QzVDLEVBQUc2QyxVQUFZLHNCQUFzQkgsb0NBQ1BDLDhCQUNOUixHQUFNIn0=