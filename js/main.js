import{buildCanvas as e,renderCanvasFrame as t,renderSvg as o}from"./renderer.js";import{configureLayout as s,rotateTransform as r,shearTransform as n,scaleTransform as d,pointToCube as a}from"./layout.js";import{makeGrid as i}from"./grid.js";import*as c from"./subset.js";import*as m from"./hex.js";import{getFloatValue as l,getIntValue as h,getRadioValue as g,getStringValue as u}from"./utils.js";import{thousandthRound as p}from"./math.js";const x="svghg",y="canvhg",f=["line","ring","hexagon","cone","rhombbus"],v="shapes",C=s({x:45,y:45},{x:90,y:90},[d(5,5)]),$=i({size:5}),E=m.makeNode({q:1,r:-1,s:0},"Cell"),q={q:-2,r:4,s:-2},j=[c.line({source:E,toward:q}),c.ring({source:E,size:3}),c.hexagon({source:E,size:3}),c.cone({source:E,toward:q,size:4}),c.rhombus({source:E,toward:q,size:3})],b=document.getElementById("svghg"),z=document.getElementById("st");export const inputs=document.querySelector('form[id="params"]'),getForm=()=>[s({x:h("orx"),y:h("ory")},{x:h("csx"),y:h("csy")},[r(l("orientation")*Math.PI/12),n(l("shx"),l("shy")),d(h("hsx"),h("hsy"))]),i({shape:g("shape"),size:[h("gs1"),h("gs2")],populate:!0})],rendSvg=()=>{const e=getForm();let t;for(document.getElementById("shapes").style.width=`${u("csx")}px`;t=b.lastChild;)b.removeChild(t);o("svghg",...e)},makeCanv=()=>{const[o,s]=getForm(),r=e("canvhg",o),n=r.getContext("2d");return document.getElementById("canvhg").appendChild(r),t(n,o,s),n},rendCanv=e=>{t(e,...getForm())};let I;document.addEventListener("DOMContentLoaded",(()=>{rendSvg(),I=makeCanv(),rendCanv(I);const e=document.getElementById("shapes");f.forEach(((t,s)=>{const r=document.createElement("div"),n=j[s];r.id=t,r.style.display="inline-block",e.appendChild(r),o(t,C,$);r.querySelector(`[data-hex-node-id="${E.id}"]`).classList.add("source"),n.forEach((e=>{const o=document.querySelector(`#${t} [data-hex-node-id="${e.id}"]`);o&&o.classList.add("hilit")}))}))})),inputs.addEventListener("input",(()=>{rendSvg(),rendCanv(I)})),b.addEventListener("mouseup",(e=>{if(!e.target.matches(".cell"))return;const[t]=getForm(),o={x:e.offsetX,y:e.offsetY},{q:s,r:r,s:n}=a(o,t),d=`x: ${e.offsetX}, y: ${e.offsetY}`,i=`q: ${p(s)}, r: ${p(r)}, s: ${p(n)}`,c=e.target.getAttribute("data-hex-node-id");z.innerText=`click coordinates: ${d}\n  fractional qrs coordinates: ${i}\n  hex cell coordinates: ${c}`}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbImJ1aWxkQ2FudmFzIiwicmVuZGVyQ2FudmFzRnJhbWUiLCJyZW5kZXJTdmciLCJjb25maWd1cmVMYXlvdXQiLCJyb3RhdGVUcmFuc2Zvcm0iLCJzaGVhclRyYW5zZm9ybSIsInNjYWxlVHJhbnNmb3JtIiwicG9pbnRUb0N1YmUiLCJtYWtlR3JpZCIsIlN1YnNldCIsIkhleCIsImdldEZsb2F0VmFsdWUiLCJnZXRJbnRWYWx1ZSIsImdldFJhZGlvVmFsdWUiLCJnZXRTdHJpbmdWYWx1ZSIsInRob3VzYW5kdGhSb3VuZCIsInN2Z0dyaWRUYXJnZXQiLCJjYW52YXNHcmlkVGFyZ2V0Iiwic2hhcGVzIiwic2hhcGVzSG9sZGVyIiwic2hhcGVMYXlvdXRDb25maWciLCJ4IiwieSIsInNoYXBlR3JpZCIsInNpemUiLCJzb3VyY2UiLCJtYWtlTm9kZSIsInEiLCJyIiwicyIsInRvd2FyZCIsInN1YnNldHMiLCJsaW5lIiwicmluZyIsImhleGFnb24iLCJjb25lIiwicmhvbWJ1cyIsInN2Z1JlbmRlckNvbnRleHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3QiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Rm9ybSIsIk1hdGgiLCJQSSIsInNoYXBlIiwicG9wdWxhdGUiLCJyZW5kU3ZnIiwiY29uZmlnIiwibGFzdCIsInN0eWxlIiwid2lkdGgiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIm1ha2VDYW52IiwibGF5b3V0IiwiZ3JpZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJhcHBlbmRDaGlsZCIsInJlbmRDYW52IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhvbGRlciIsImZvckVhY2giLCJpbmRleCIsInNoYXBlQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInN1YnNldCIsImlkIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJjZWxsIiwiZXYiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY2xpY2tYWSIsIm9mZnNldFgiLCJvZmZzZXRZIiwieHkiLCJwdGMiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiXSwibWFwcGluZ3MiOiJzQkFNU0EsdUJBQWFDLGVBQW1CQyxNQUFpQiwwQ0FHeERDLHFCQUNBQyxvQkFDQUMsb0JBQ0FDLGlCQUNBQyxNQUVLLGlDQUNzQkMsTUFBZ0Isc0JBQ2pDQyxNQUFZLHdCQUNaQyxNQUFTLG1DQUNaQyxpQkFBZUMsbUJBQWFDLG9CQUFlQyxNQUFzQix1Q0FDakVDLE1BQXVCLFlBRWhDLE1BQU1DLEVBQWdCLFFBQ3BCQyxFQUFtQixTQUNuQkMsRUFBUyxDQUFDLE9BQVEsT0FBUSxVQUFXLE9BQVEsWUFDN0NDLEVBQWUsU0FDZkMsRUFBa0NqQixFQUFnQixDQUFFa0IsRUFBRyxHQUFJQyxFQUFHLElBQU0sQ0FBRUQsRUFBRyxHQUFJQyxFQUFHLElBQU0sQ0FDcEZoQixFQUFlLEVBQUcsS0FFcEJpQixFQUFxQmYsRUFBUyxDQUFFZ0IsS0FBTSxJQUN0Q0MsRUFBU2YsRUFBSWdCLFNBQVMsQ0FBRUMsRUFBRyxFQUFHQyxHQUFJLEVBQUdDLEVBQUcsR0FBSyxRQUM3Q0MsRUFBUyxDQUFFSCxHQUFJLEVBQUdDLEVBQUcsRUFBR0MsR0FBSSxHQUM1QkUsRUFBVSxDQUNSdEIsRUFBT3VCLEtBQUssQ0FBRVAsT0FBQUEsRUFBUUssT0FBQUEsSUFDdEJyQixFQUFPd0IsS0FBSyxDQUFFUixPQUFBQSxFQUFRRCxLQUFNLElBQzVCZixFQUFPeUIsUUFBUSxDQUFFVCxPQUFBQSxFQUFRRCxLQUFNLElBQy9CZixFQUFPMEIsS0FBSyxDQUFFVixPQUFBQSxFQUFRSyxPQUFBQSxFQUFRTixLQUFNLElBQ3BDZixFQUFPMkIsUUFBUSxDQUFFWCxPQUFBQSxFQUFRSyxPQUFBQSxFQUFRTixLQUFNLEtBRXpDYSxFQUFtQkMsU0FBU0MsZUFqQlIsU0FrQnBCQyxFQUFLRixTQUFTQyxlQUFlLGFBQ3hCLE1BQU1FLE9BQVNILFNBQVNJLGNBQWMscUJBQzNDQyxRQUFVLElBQ0QsQ0FDTHhDLEVBQ0UsQ0FBRWtCLEVBQUdULEVBQVksT0FBUVUsRUFBR1YsRUFBWSxRQUN4QyxDQUFFUyxFQUFHVCxFQUFZLE9BQVFVLEVBQUdWLEVBQVksUUFDeEMsQ0FDRVIsRUFBaUJPLEVBQWMsZUFBaUJpQyxLQUFLQyxHQUFNLElBQzNEeEMsRUFBZU0sRUFBYyxPQUFRQSxFQUFjLFFBQ25ETCxFQUFlTSxFQUFZLE9BQVFBLEVBQVksVUFHbkRKLEVBQVMsQ0FDUHNDLE1BQU9qQyxFQUFjLFNBQ3JCVyxLQUFNLENBQUNaLEVBQVksT0FBUUEsRUFBWSxRQUN2Q21DLFVBQVUsS0FJaEJDLFFBQVUsS0FDUixNQUFNQyxFQUFTTixVQUVmLElBQUlPLEVBRUosSUFIV1osU0FBU0MsZUFyQ1AsVUF1Q05ZLE1BQU1DLE1BQVEsR0FBR3RDLEVBQWUsV0FDL0JvQyxFQUFPYixFQUFpQmdCLFdBQzlCaEIsRUFBaUJpQixZQUFZSixHQUUvQmhELEVBOUNrQixXQThDVStDLElBRTlCTSxTQUFXLEtBQ1QsTUFBT0MsRUFBUUMsR0FBUWQsVUFDckJlLEVBQVMxRCxFQWpETSxTQWlEd0J3RCxHQUN2Q0csRUFBTUQsRUFBT0UsV0FBVyxNQUkxQixPQUhpQnRCLFNBQVNDLGVBbkRULFVBb0RKc0IsWUFBWUgsR0FDekJ6RCxFQUFrQjBELEVBQUtILEVBQVFDLEdBQ3hCRSxHQUVURyxTQUFZSCxJQUNWMUQsRUFBa0IwRCxLQUFRaEIsWUFJOUIsSUFBSWdCLEVBQ0pyQixTQUFTeUIsaUJBQWlCLG9CQUFvQixLQUM1Q2YsVUFDQVcsRUFBTUosV0FDTk8sU0FBU0gsR0FDVCxNQUFNSyxFQUFTMUIsU0FBU0MsZUFoRVQsVUFpRWZyQixFQUFPK0MsU0FBUSxDQUFDbkIsRUFBT29CLEtBQ3JCLE1BQU1DLEVBQWlCN0IsU0FBUzhCLGNBQWMsT0FDNUNDLEVBQVN0QyxFQUFRbUMsR0FDbkJDLEVBQWVHLEdBQUt4QixFQUNwQnFCLEVBQWVoQixNQUFNb0IsUUFBVSxlQUMvQlAsRUFBT0gsWUFBWU0sR0FDbkJqRSxFQUFVNEMsRUFBTzFCLEVBQW1CRyxHQUNsQjRDLEVBQWV6QixjQUMvQixzQkFBc0JqQixFQUFPNkMsUUFFckJFLFVBQVVDLElBQUksVUFDeEJKLEVBQU9KLFNBQVNTLElBQ2QsTUFBTUMsRUFBT3JDLFNBQVNJLGNBQ3BCLElBQUlJLHdCQUE0QjRCLEVBQUVKLFFBRWhDSyxHQUNGQSxFQUFLSCxVQUFVQyxJQUFJLGtCQU0zQmhDLE9BQU9zQixpQkFBaUIsU0FBUyxLQUMvQmYsVUFDQWMsU0FBU0gsTUFFWHRCLEVBQWlCMEIsaUJBQWlCLFdBQVlhLElBQzVDLElBQU1BLEVBQUdDLE9BQW1CQyxRQUFRLFNBQVUsT0FDOUMsTUFBT3RCLEdBQVViLFVBQ2ZvQyxFQUFvQixDQUFFMUQsRUFBR3VELEVBQUdJLFFBQVMxRCxFQUFHc0QsRUFBR0ssVUFDM0N0RCxFQUFFQSxFQUFDQyxFQUFFQSxFQUFDQyxFQUFFQSxHQUFNdEIsRUFBWXdFLEVBQVN2QixHQUNuQzBCLEVBQUssTUFBTU4sRUFBR0ksZUFBZUosRUFBR0ssVUFDaENFLEVBQU0sTUFBTXBFLEVBQWdCWSxVQUFVWixFQUFnQmEsVUFBVWIsRUFBZ0JjLEtBQ2hGOEMsRUFBUUMsRUFBR0MsT0FBbUJPLGFBQWEsb0JBQzdDNUMsRUFBRzZDLFVBQVksc0JBQXNCSCxvQ0FDUEMsOEJBQ05SIn0=