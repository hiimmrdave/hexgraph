import{buildCanvas as e,renderCanvasFrame as t,renderSvg as o}from"./renderer.js";import{configureLayout as s,rotateTransform as r,shearTransform as n,scaleTransform as d,pointToCube as a}from"./layout.js";import{makeGrid as i}from"./grid.js";import*as c from"./subset.js";import*as m from"./hex.js";import{getFloatValue as l,getIntValue as h,getRadioValue as g,getStringValue as u,getCheckbox as p}from"./utils.js";import{thousandthRound as x}from"./math.js";const y="svghg",f="canvhg",v=["line","ring","hexagon","cone","rhombbus"],$="shapes",E=s({x:45,y:45},{x:90,y:90},[d(5,5)]),C=i({size:5}),q=m.makeNode({q:1,r:-1,s:0},"Cell"),b={q:-2,r:4,s:-2},j=[c.line({source:q,toward:b}),c.ring({source:q,size:3}),c.hexagon({source:q,size:3}),c.cone({source:q,toward:b,size:4}),c.rhombus({source:q,toward:b,size:3})],z=document.getElementById("svghg"),I=document.getElementById("st");export const inputs=document.querySelector('form[id="params"]'),getForm=()=>[s({x:h("orx"),y:h("ory")},{x:h("csx"),y:h("csy")},[r(l("orientation")*Math.PI/12),n(l("shx"),l("shy")),d(h("hsx"),h("hsy"))]),i({shape:g("shape"),size:[h("gs1"),h("gs2")],populate:!0}),p("debug")],rendSvg=()=>{const e=getForm();let t;for(document.getElementById("shapes").style.width=`${u("csx")}px`;t=z.lastChild;)z.removeChild(t);o("svghg",...e)},makeCanv=()=>{const[o,s]=getForm(),r=e("canvhg",o),n=r.getContext("2d");return document.getElementById("canvhg").appendChild(r),t(n,o,s),n},rendCanv=e=>{t(e,...getForm())};document.addEventListener("DOMContentLoaded",(()=>{rendSvg();const e=document.getElementById("shapes");v.forEach(((t,s)=>{const r=document.createElement("div"),n=j[s];r.id=t,r.style.display="inline-block",e.appendChild(r),o(t,E,C);r.querySelector(`[data-hex-node-id="${q.id}"]`).classList.add("source"),n.forEach((e=>{const o=document.querySelector(`#${t} [data-hex-node-id="${e.id}"]`);o&&o.classList.add("hilit")}))}))})),inputs.addEventListener("input",(()=>{rendSvg()})),z.addEventListener("mouseup",(e=>{if(!e.target.matches(".cell"))return;const[t]=getForm(),o={x:e.offsetX,y:e.offsetY},{q:s,r:r,s:n}=a(o,t),d=`x: ${e.offsetX}, y: ${e.offsetY}`,i=`q: ${x(s)}, r: ${x(r)}, s: ${x(n)}`,c=e.target.getAttribute("data-hex-node-id");I.innerText=`click coordinates: ${d}\n  fractional qrs coordinates: ${i}\n  hex cell coordinates: ${c}`}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbImJ1aWxkQ2FudmFzIiwicmVuZGVyQ2FudmFzRnJhbWUiLCJyZW5kZXJTdmciLCJjb25maWd1cmVMYXlvdXQiLCJyb3RhdGVUcmFuc2Zvcm0iLCJzaGVhclRyYW5zZm9ybSIsInNjYWxlVHJhbnNmb3JtIiwicG9pbnRUb0N1YmUiLCJtYWtlR3JpZCIsIlN1YnNldCIsIkhleCIsImdldEZsb2F0VmFsdWUiLCJnZXRJbnRWYWx1ZSIsImdldFJhZGlvVmFsdWUiLCJnZXRTdHJpbmdWYWx1ZSIsImdldENoZWNrYm94IiwidGhvdXNhbmR0aFJvdW5kIiwic3ZnR3JpZFRhcmdldCIsImNhbnZhc0dyaWRUYXJnZXQiLCJzaGFwZXMiLCJzaGFwZXNIb2xkZXIiLCJzaGFwZUxheW91dENvbmZpZyIsIngiLCJ5Iiwic2hhcGVHcmlkIiwic2l6ZSIsInNvdXJjZSIsIm1ha2VOb2RlIiwicSIsInIiLCJzIiwidG93YXJkIiwic3Vic2V0cyIsImxpbmUiLCJyaW5nIiwiaGV4YWdvbiIsImNvbmUiLCJyaG9tYnVzIiwic3ZnUmVuZGVyQ29udGV4dCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdCIsImlucHV0cyIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRGb3JtIiwiTWF0aCIsIlBJIiwic2hhcGUiLCJwb3B1bGF0ZSIsInJlbmRTdmciLCJjb25maWciLCJsYXN0Iiwic3R5bGUiLCJ3aWR0aCIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwibWFrZUNhbnYiLCJsYXlvdXQiLCJncmlkIiwiY2FudmFzIiwiY3R4IiwiZ2V0Q29udGV4dCIsImFwcGVuZENoaWxkIiwicmVuZENhbnYiLCJhZGRFdmVudExpc3RlbmVyIiwiaG9sZGVyIiwiZm9yRWFjaCIsImluZGV4Iiwic2hhcGVDb250YWluZXIiLCJjcmVhdGVFbGVtZW50Iiwic3Vic2V0IiwiaWQiLCJkaXNwbGF5IiwiY2xhc3NMaXN0IiwiYWRkIiwiZSIsImNlbGwiLCJldiIsInRhcmdldCIsIm1hdGNoZXMiLCJjbGlja1hZIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJ4eSIsInB0YyIsImdldEF0dHJpYnV0ZSIsImlubmVyVGV4dCJdLCJtYXBwaW5ncyI6InNCQVFTQSx1QkFBYUMsZUFBbUJDLE1BQWlCLDBDQUd4REMscUJBQ0FDLG9CQUNBQyxvQkFDQUMsaUJBQ0FDLE1BRUssaUNBQ3NCQyxNQUFnQixzQkFDakNDLE1BQVksd0JBQ1pDLE1BQVMsbUNBQ1pDLGlCQUFlQyxtQkFBYUMsb0JBQWVDLGlCQUFnQkMsTUFBbUIsdUNBQzlFQyxNQUF1QixZQUVoQyxNQUFNQyxFQUFnQixRQUNwQkMsRUFBbUIsU0FDbkJDLEVBQVMsQ0FBQyxPQUFRLE9BQVEsVUFBVyxPQUFRLFlBQzdDQyxFQUFlLFNBQ2ZDLEVBQWtDbEIsRUFBZ0IsQ0FBRW1CLEVBQUcsR0FBSUMsRUFBRyxJQUFNLENBQUVELEVBQUcsR0FBSUMsRUFBRyxJQUFNLENBQ3BGakIsRUFBZSxFQUFHLEtBRXBCa0IsRUFBcUJoQixFQUFTLENBQUVpQixLQUFNLElBQ3RDQyxFQUFTaEIsRUFBSWlCLFNBQVMsQ0FBRUMsRUFBRyxFQUFHQyxHQUFJLEVBQUdDLEVBQUcsR0FBSyxRQUM3Q0MsRUFBUyxDQUFFSCxHQUFJLEVBQUdDLEVBQUcsRUFBR0MsR0FBSSxHQUM1QkUsRUFBVSxDQUNSdkIsRUFBT3dCLEtBQUssQ0FBRVAsT0FBQUEsRUFBUUssT0FBQUEsSUFDdEJ0QixFQUFPeUIsS0FBSyxDQUFFUixPQUFBQSxFQUFRRCxLQUFNLElBQzVCaEIsRUFBTzBCLFFBQVEsQ0FBRVQsT0FBQUEsRUFBUUQsS0FBTSxJQUMvQmhCLEVBQU8yQixLQUFLLENBQUVWLE9BQUFBLEVBQVFLLE9BQUFBLEVBQVFOLEtBQU0sSUFDcENoQixFQUFPNEIsUUFBUSxDQUFFWCxPQUFBQSxFQUFRSyxPQUFBQSxFQUFRTixLQUFNLEtBRXpDYSxFQUFtQkMsU0FBU0MsZUFqQlIsU0FrQnBCQyxFQUFLRixTQUFTQyxlQUFlLGFBQ3hCLE1BQU1FLE9BQVNILFNBQVNJLGNBQWMscUJBQzNDQyxRQUFVLElBQ0QsQ0FDTHpDLEVBQ0UsQ0FBRW1CLEVBQUdWLEVBQVksT0FBUVcsRUFBR1gsRUFBWSxRQUN4QyxDQUFFVSxFQUFHVixFQUFZLE9BQVFXLEVBQUdYLEVBQVksUUFDeEMsQ0FDRVIsRUFBaUJPLEVBQWMsZUFBaUJrQyxLQUFLQyxHQUFNLElBQzNEekMsRUFBZU0sRUFBYyxPQUFRQSxFQUFjLFFBQ25ETCxFQUFlTSxFQUFZLE9BQVFBLEVBQVksVUFHbkRKLEVBQVMsQ0FDUHVDLE1BQU9sQyxFQUFjLFNBQ3JCWSxLQUFNLENBQUNiLEVBQVksT0FBUUEsRUFBWSxRQUN2Q29DLFVBQVUsSUFFWmpDLEVBQVksVUFHaEJrQyxRQUFVLEtBQ1IsTUFBTUMsRUFBU04sVUFFZixJQUFJTyxFQUVKLElBSFdaLFNBQVNDLGVBdENQLFVBd0NOWSxNQUFNQyxNQUFRLEdBQUd2QyxFQUFlLFdBQy9CcUMsRUFBT2IsRUFBaUJnQixXQUM5QmhCLEVBQWlCaUIsWUFBWUosR0FFL0JqRCxFQS9Da0IsV0ErQ1VnRCxJQUU5Qk0sU0FBVyxLQUNULE1BQU9DLEVBQVFDLEdBQVFkLFVBQ3JCZSxFQUFTM0QsRUFsRE0sU0FrRHdCeUQsR0FDdkNHLEVBQU1ELEVBQU9FLFdBQVcsTUFJMUIsT0FIaUJ0QixTQUFTQyxlQXBEVCxVQXFESnNCLFlBQVlILEdBQ3pCMUQsRUFBa0IyRCxFQUFLSCxFQUFRQyxHQUN4QkUsR0FFVEcsU0FBWUgsSUFDVjNELEVBQWtCMkQsS0FBUWhCLFlBSzlCTCxTQUFTeUIsaUJBQWlCLG9CQUFvQixLQUM1Q2YsVUFHQSxNQUFNZ0IsRUFBUzFCLFNBQVNDLGVBakVULFVBa0VmckIsRUFBTytDLFNBQVEsQ0FBQ25CLEVBQU9vQixLQUNyQixNQUFNQyxFQUFpQjdCLFNBQVM4QixjQUFjLE9BQzVDQyxFQUFTdEMsRUFBUW1DLEdBQ25CQyxFQUFlRyxHQUFLeEIsRUFDcEJxQixFQUFlaEIsTUFBTW9CLFFBQVUsZUFDL0JQLEVBQU9ILFlBQVlNLEdBQ25CbEUsRUFBVTZDLEVBQU8xQixFQUFtQkcsR0FDbEI0QyxFQUFlekIsY0FDL0Isc0JBQXNCakIsRUFBTzZDLFFBRXJCRSxVQUFVQyxJQUFJLFVBQ3hCSixFQUFPSixTQUFTUyxJQUNkLE1BQU1DLEVBQU9yQyxTQUFTSSxjQUNwQixJQUFJSSx3QkFBNEI0QixFQUFFSixRQUVoQ0ssR0FDRkEsRUFBS0gsVUFBVUMsSUFBSSxrQkFNM0JoQyxPQUFPc0IsaUJBQWlCLFNBQVMsS0FDL0JmLGFBR0ZYLEVBQWlCMEIsaUJBQWlCLFdBQVlhLElBQzVDLElBQU1BLEVBQUdDLE9BQW1CQyxRQUFRLFNBQVUsT0FDOUMsTUFBT3RCLEdBQVViLFVBQ2ZvQyxFQUFvQixDQUFFMUQsRUFBR3VELEVBQUdJLFFBQVMxRCxFQUFHc0QsRUFBR0ssVUFDM0N0RCxFQUFFQSxFQUFDQyxFQUFFQSxFQUFDQyxFQUFFQSxHQUFNdkIsRUFBWXlFLEVBQVN2QixHQUNuQzBCLEVBQUssTUFBTU4sRUFBR0ksZUFBZUosRUFBR0ssVUFDaENFLEVBQU0sTUFBTXBFLEVBQWdCWSxVQUFVWixFQUFnQmEsVUFBVWIsRUFBZ0JjLEtBQ2hGOEMsRUFBUUMsRUFBR0MsT0FBbUJPLGFBQWEsb0JBQzdDNUMsRUFBRzZDLFVBQVksc0JBQXNCSCxvQ0FDUEMsOEJBQ05SIn0=