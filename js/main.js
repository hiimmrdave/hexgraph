import{buildCanvas as e,renderCanvasFrame as t,renderSvg as o}from"./renderer.js";import{configureLayout as s,rotateTransform as r,shearTransform as n,scaleTransform as d,pointToCube as a}from"./layout.js";import{makeGrid as i}from"./grid.js";import*as c from"./subset.js";import*as m from"./hex.js";import{getFloatValue as l,getIntValue as h,getRadioValue as g,getStringValue as u}from"./utils.js";import{thousandthRound as p}from"./math.js";const x="svghg",y="canvhg",f=["line","ring","hexagon","cone","rhombbus"],v="shapes",C=s({x:45,y:45},{x:90,y:90},[d(5,5)]),$=i({size:5}),E=m.makeNode({q:6,r:-6,s:0},"Cell"),q={q:-12,r:24,s:-12},j=[c.line({source:E,toward:q}),c.ring({source:E,size:3}),c.hexagon({source:E,size:3}),c.cone({source:E,toward:q,size:4}),c.rhombus({source:E,toward:q,size:3})],b=document.getElementById("svghg"),z=document.getElementById("st");export const inputs=document.querySelector('form[id="params"]'),getForm=()=>[s({x:h("orx"),y:h("ory")},{x:h("csx"),y:h("csy")},[r(l("orientation")*Math.PI/12),n(l("shx"),l("shy")),d(h("hsx"),h("hsy"))]),i({shape:g("shape"),size:[h("gs1"),h("gs2")],populate:!0})],rendSvg=()=>{const e=getForm();let t;for(document.getElementById("shapes").style.width=`${u("csx")}px`;t=b.lastChild;)b.removeChild(t);o("svghg",...e)},makeCanv=()=>{const[o,s]=getForm(),r=e("canvhg",o),n=r.getContext("2d");return document.getElementById("canvhg").appendChild(r),t(n,o,s),n},rendCanv=e=>{t(e,...getForm())};let I;document.addEventListener("DOMContentLoaded",(()=>{rendSvg(),I=makeCanv(),rendCanv(I);const e=document.getElementById("shapes");f.forEach(((t,s)=>{const r=document.createElement("div"),n=j[s];r.id=t,r.style.display="inline-block",e.appendChild(r),o(t,C,$);r.querySelector(`[data-hex-node-id="${E.id}"]`).classList.add("source"),n.forEach((e=>{const o=document.querySelector(`#${t} [data-hex-node-id="${e.id}"]`);o&&o.classList.add("hilit")}))}))})),inputs.addEventListener("input",(()=>{rendSvg(),rendCanv(I)})),b.addEventListener("mouseup",(e=>{if(!e.target.matches(".cell"))return;const[t]=getForm(),o={x:e.offsetX,y:e.offsetY},{q:s,r:r,s:n}=a(o,t),d=`x: ${e.offsetX}, y: ${e.offsetY}`,i=`q: ${p(s)}, r: ${p(r)}, s: ${p(n)}`,c=e.target.getAttribute("data-hex-node-id");z.innerText=`click coordinates: ${d}\n  fractional qrs coordinates: ${i}\n  hex cell coordinates: ${c}`}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbImJ1aWxkQ2FudmFzIiwicmVuZGVyQ2FudmFzRnJhbWUiLCJyZW5kZXJTdmciLCJjb25maWd1cmVMYXlvdXQiLCJyb3RhdGVUcmFuc2Zvcm0iLCJzaGVhclRyYW5zZm9ybSIsInNjYWxlVHJhbnNmb3JtIiwicG9pbnRUb0N1YmUiLCJtYWtlR3JpZCIsIlN1YnNldCIsIkhleCIsImdldEZsb2F0VmFsdWUiLCJnZXRJbnRWYWx1ZSIsImdldFJhZGlvVmFsdWUiLCJnZXRTdHJpbmdWYWx1ZSIsInRob3VzYW5kdGhSb3VuZCIsInN2Z0dyaWRUYXJnZXQiLCJjYW52YXNHcmlkVGFyZ2V0Iiwic2hhcGVzIiwic2hhcGVzSG9sZGVyIiwic2hhcGVMYXlvdXRDb25maWciLCJ4IiwieSIsInNoYXBlR3JpZCIsInNpemUiLCJzb3VyY2UiLCJtYWtlTm9kZSIsInEiLCJyIiwicyIsInRvd2FyZCIsInN1YnNldHMiLCJsaW5lIiwicmluZyIsImhleGFnb24iLCJjb25lIiwicmhvbWJ1cyIsInN2Z1JlbmRlckNvbnRleHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3QiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Rm9ybSIsIk1hdGgiLCJQSSIsInNoYXBlIiwicG9wdWxhdGUiLCJyZW5kU3ZnIiwiY29uZmlnIiwibGFzdCIsInN0eWxlIiwid2lkdGgiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIm1ha2VDYW52IiwibGF5b3V0IiwiZ3JpZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJhcHBlbmRDaGlsZCIsInJlbmRDYW52IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhvbGRlciIsImZvckVhY2giLCJpbmRleCIsInNoYXBlQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInN1YnNldCIsImlkIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJjZWxsIiwiZXYiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY2xpY2tYWSIsIm9mZnNldFgiLCJvZmZzZXRZIiwieHkiLCJwdGMiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiXSwibWFwcGluZ3MiOiJzQkFNU0EsdUJBQWFDLGVBQW1CQyxNQUFpQiwwQ0FHeERDLHFCQUNBQyxvQkFDQUMsb0JBQ0FDLGlCQUNBQyxNQUVLLGlDQUNzQkMsTUFBZ0Isc0JBQ2pDQyxNQUFZLHdCQUNaQyxNQUFTLG1DQUVuQkMsaUJBQ0FDLG1CQUNBQyxvQkFDQUMsTUFDSyx1Q0FDRUMsTUFBdUIsWUFFaEMsTUFBTUMsRUFBZ0IsUUFDcEJDLEVBQW1CLFNBQ25CQyxFQUFTLENBQUMsT0FBUSxPQUFRLFVBQVcsT0FBUSxZQUM3Q0MsRUFBZSxTQUNmQyxFQUFrQ2pCLEVBQ2hDLENBQUVrQixFQUFHLEdBQUlDLEVBQUcsSUFDWixDQUFFRCxFQUFHLEdBQUlDLEVBQUcsSUFDWixDQUFDaEIsRUFBZSxFQUFHLEtBRXJCaUIsRUFBcUJmLEVBQVMsQ0FBRWdCLEtBQU0sSUFDdENDLEVBQVNmLEVBQUlnQixTQUFTLENBQUVDLEVBQUcsRUFBR0MsR0FBSSxFQUFHQyxFQUFHLEdBQUssUUFDN0NDLEVBQVMsQ0FBRUgsR0FBSSxHQUFJQyxFQUFHLEdBQUlDLEdBQUksSUFDOUJFLEVBQVUsQ0FDUnRCLEVBQU91QixLQUFLLENBQUVQLE9BQUFBLEVBQVFLLE9BQUFBLElBQ3RCckIsRUFBT3dCLEtBQUssQ0FBRVIsT0FBQUEsRUFBUUQsS0FBTSxJQUM1QmYsRUFBT3lCLFFBQVEsQ0FBRVQsT0FBQUEsRUFBUUQsS0FBTSxJQUMvQmYsRUFBTzBCLEtBQUssQ0FBRVYsT0FBQUEsRUFBUUssT0FBQUEsRUFBUU4sS0FBTSxJQUNwQ2YsRUFBTzJCLFFBQVEsQ0FBRVgsT0FBQUEsRUFBUUssT0FBQUEsRUFBUU4sS0FBTSxLQUV6Q2EsRUFBbUJDLFNBQVNDLGVBbkJSLFNBb0JwQkMsRUFBS0YsU0FBU0MsZUFBZSxhQUN4QixNQUFNRSxPQUFTSCxTQUFTSSxjQUMzQixxQkFFRkMsUUFBVSxJQUNELENBQ0x4QyxFQUNFLENBQUVrQixFQUFHVCxFQUFZLE9BQVFVLEVBQUdWLEVBQVksUUFDeEMsQ0FBRVMsRUFBR1QsRUFBWSxPQUFRVSxFQUFHVixFQUFZLFFBQ3hDLENBQ0VSLEVBQWlCTyxFQUFjLGVBQWlCaUMsS0FBS0MsR0FBTSxJQUMzRHhDLEVBQWVNLEVBQWMsT0FBUUEsRUFBYyxRQUNuREwsRUFBZU0sRUFBWSxPQUFRQSxFQUFZLFVBR25ESixFQUFTLENBQ1BzQyxNQUFPakMsRUFBYyxTQUNyQlcsS0FBTSxDQUFDWixFQUFZLE9BQVFBLEVBQVksUUFDdkNtQyxVQUFVLEtBSWhCQyxRQUFVLEtBQ1IsTUFBTUMsRUFBU04sVUFFZixJQUFJTyxFQUVKLElBSFdaLFNBQVNDLGVBekNQLFVBMkNOWSxNQUFNQyxNQUFRLEdBQUd0QyxFQUFlLFdBQy9Cb0MsRUFBT2IsRUFBaUJnQixXQUM5QmhCLEVBQWlCaUIsWUFBWUosR0FFL0JoRCxFQWxEa0IsV0FrRFUrQyxJQUU5Qk0sU0FBVyxLQUNULE1BQU9DLEVBQVFDLEdBQVFkLFVBQ3JCZSxFQUFTMUQsRUFyRE0sU0FxRHdCd0QsR0FDdkNHLEVBQU1ELEVBQU9FLFdBQVcsTUFNMUIsT0FMaUJ0QixTQUFTQyxlQXZEVCxVQTBESnNCLFlBQVlILEdBQ3pCekQsRUFBa0IwRCxFQUFLSCxFQUFRQyxHQUN4QkUsR0FFVEcsU0FBWUgsSUFDVjFELEVBQWtCMEQsS0FBUWhCLFlBSTlCLElBQUlnQixFQUNKckIsU0FBU3lCLGlCQUFpQixvQkFBb0IsS0FDNUNmLFVBQ0FXLEVBQU1KLFdBQ05PLFNBQVNILEdBQ1QsTUFBTUssRUFBUzFCLFNBQVNDLGVBdEVULFVBdUVmckIsRUFBTytDLFNBQVEsQ0FBQ25CLEVBQU9vQixLQUNyQixNQUFNQyxFQUFpQjdCLFNBQVM4QixjQUFjLE9BQzVDQyxFQUFTdEMsRUFBUW1DLEdBQ25CQyxFQUFlRyxHQUFLeEIsRUFDcEJxQixFQUFlaEIsTUFBTW9CLFFBQVUsZUFDL0JQLEVBQU9ILFlBQVlNLEdBQ25CakUsRUFBVTRDLEVBQU8xQixFQUFtQkcsR0FDbEI0QyxFQUFlekIsY0FDL0Isc0JBQXNCakIsRUFBTzZDLFFBRXJCRSxVQUFVQyxJQUFJLFVBQ3hCSixFQUFPSixTQUFTUyxJQUNkLE1BQU1DLEVBQU9yQyxTQUFTSSxjQUNwQixJQUFJSSx3QkFBNEI0QixFQUFFSixRQUVoQ0ssR0FDRkEsRUFBS0gsVUFBVUMsSUFBSSxrQkFNM0JoQyxPQUFPc0IsaUJBQWlCLFNBQVMsS0FDL0JmLFVBQ0FjLFNBQVNILE1BRVh0QixFQUFpQjBCLGlCQUFpQixXQUFZYSxJQUM1QyxJQUFNQSxFQUFHQyxPQUFtQkMsUUFBUSxTQUFVLE9BQzlDLE1BQU90QixHQUFVYixVQUNmb0MsRUFBb0IsQ0FBRTFELEVBQUd1RCxFQUFHSSxRQUFTMUQsRUFBR3NELEVBQUdLLFVBQzNDdEQsRUFBRUEsRUFBQ0MsRUFBRUEsRUFBQ0MsRUFBRUEsR0FBTXRCLEVBQVl3RSxFQUFTdkIsR0FDbkMwQixFQUFLLE1BQU1OLEVBQUdJLGVBQWVKLEVBQUdLLFVBQ2hDRSxFQUFNLE1BQU1wRSxFQUFnQlksVUFBVVosRUFDcENhLFVBQ09iLEVBQWdCYyxLQUN6QjhDLEVBQVFDLEVBQUdDLE9BQW1CTyxhQUFhLG9CQUM3QzVDLEVBQUc2QyxVQUFZLHNCQUFzQkgsb0NBQ1BDLDhCQUNOUiJ9