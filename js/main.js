import{buildCanvas as d,renderCanvasFrame as c,renderSvg as m}from"./renderer.js";import{configureLayout as u,rotateTransform as h,shearTransform as g,scaleTransform as x,pointToCube as y}from"./layout.js";import{makeGrid as v}from"./grid.js";import*as $ from"./subset.js";import*as E from"./hex.js";import{getFloatValue as C,getIntValue as q,getRadioValue as b,getStringValue as j,getCheckbox as z}from"./utils.js";import{thousandthRound as I}from"./math.js";const L="svghg",S="canvhg",B=["line","ring","hexagon","cone","rhombbus"],F="shapes",k=u({x:45,y:45},{x:90,y:90},[x(5,5)]),w=v({size:5}),M=E.makeNode({q:1,r:-1,s:0},"Cell"),X={q:-2,r:4,s:-2},Y=[$.line({source:M,toward:X}),$.ring({source:M,size:3}),$.hexagon({source:M,size:3}),$.cone({source:M,toward:X,size:4}),$.rhombus({source:M,toward:X,size:3})],A=document.getElementById(L),D=document.getElementById("st");export const inputs=document.querySelector('form[id="params"]'),getForm=()=>[u({x:q("orx"),y:q("ory")},{x:q("csx"),y:q("csy")},[h(C("orientation")*Math.PI/12),g(C("shx"),C("shy")),x(q("hsx"),q("hsy"))]),v({shape:b("shape"),size:[q("gs1"),q("gs2")],populate:!0}),z("debug")],rendSvg=()=>{const e=getForm();let t;for(document.getElementById(F).style.width=`${j("csx")}px`;t=A.lastChild;)A.removeChild(t);m(L,...e)},makeCanv=()=>{const[e,t]=getForm(),o=d(S,e),s=o.getContext("2d");return document.getElementById(S).appendChild(o),c(s,e,t),s},rendCanv=e=>{c(e,...getForm())};document.addEventListener("DOMContentLoaded",(()=>{rendSvg();const e=document.getElementById(F);B.forEach(((t,o)=>{const s=document.createElement("div"),r=Y[o];s.id=t,s.style.display="inline-block",e.appendChild(s),m(t,k,w);s.querySelector(`[data-hex-node-id="${M.id}"]`).classList.add("source"),r.forEach((e=>{const o=document.querySelector(`#${t} [data-hex-node-id="${e.id}"]`);o&&o.classList.add("hilit")}))}))})),inputs.addEventListener("input",(()=>{rendSvg()})),A.addEventListener("mouseup",(e=>{if(!e.target.matches(".cell"))return;const[t]=getForm(),o={x:e.offsetX,y:e.offsetY},{q:s,r:r,s:n}=y(o,t),d=`x: ${e.offsetX}, y: ${e.offsetY}`,i=`q: ${I(s)}, r: ${I(r)}, s: ${I(n)}`,a=e.target.getAttribute("data-hex-node-id");D.innerText=`click coordinates: ${d}\n  fractional qrs coordinates: ${i}\n  hex cell coordinates: ${a}`}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidWlsZENhbnZhcyIsInJlbmRlckNhbnZhc0ZyYW1lIiwicmVuZGVyU3ZnIiwiY29uZmlndXJlTGF5b3V0Iiwicm90YXRlVHJhbnNmb3JtIiwic2hlYXJUcmFuc2Zvcm0iLCJzY2FsZVRyYW5zZm9ybSIsInBvaW50VG9DdWJlIiwibWFrZUdyaWQiLCJTdWJzZXQiLCJIZXgiLCJnZXRGbG9hdFZhbHVlIiwiZ2V0SW50VmFsdWUiLCJnZXRSYWRpb1ZhbHVlIiwiZ2V0U3RyaW5nVmFsdWUiLCJnZXRDaGVja2JveCIsInRob3VzYW5kdGhSb3VuZCIsInN2Z0dyaWRUYXJnZXQiLCJjYW52YXNHcmlkVGFyZ2V0Iiwic2hhcGVzIiwic2hhcGVzSG9sZGVyIiwic2hhcGVMYXlvdXRDb25maWciLCJ4IiwieSIsInNoYXBlR3JpZCIsInNpemUiLCJzb3VyY2UiLCJtYWtlTm9kZSIsInEiLCJyIiwicyIsInRvd2FyZCIsInN1YnNldHMiLCJsaW5lIiwicmluZyIsImhleGFnb24iLCJjb25lIiwicmhvbWJ1cyIsInN2Z1JlbmRlckNvbnRleHQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3QiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0Rm9ybSIsIk1hdGgiLCJQSSIsInNoYXBlIiwicG9wdWxhdGUiLCJyZW5kU3ZnIiwiY29uZmlnIiwibGFzdCIsInN0eWxlIiwid2lkdGgiLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIm1ha2VDYW52IiwibGF5b3V0IiwiZ3JpZCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJhcHBlbmRDaGlsZCIsInJlbmRDYW52IiwiYWRkRXZlbnRMaXN0ZW5lciIsImhvbGRlciIsImZvckVhY2giLCJpbmRleCIsInNoYXBlQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInN1YnNldCIsImlkIiwiZGlzcGxheSIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJjZWxsIiwiZXYiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY2xpY2tYWSIsIm9mZnNldFgiLCJvZmZzZXRZIiwieHkiLCJwdGMiLCJnZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiXSwic291cmNlcyI6WyIuLi9zcmMvbWFpbi50cyJdLCJtYXBwaW5ncyI6InNCQVFTQSx1QkFBYUMsZUFBbUJDLE1BQWlCLDBDQUd4REMscUJBQ0FDLG9CQUNBQyxvQkFDQUMsaUJBQ0FDLE1BRUssaUNBQ3NCQyxNQUFnQixzQkFDakNDLE1BQVksd0JBQ1pDLE1BQVMsbUNBQ1pDLGlCQUFlQyxtQkFBYUMsb0JBQWVDLGlCQUFnQkMsTUFBbUIsdUNBQzlFQyxNQUF1QixZQUVoQyxNQUFNQyxFQUFnQixRQUNwQkMsRUFBbUIsU0FDbkJDLEVBQVMsQ0FBQyxPQUFRLE9BQVEsVUFBVyxPQUFRLFlBQzdDQyxFQUFlLFNBQ2ZDLEVBQWtDbEIsRUFBZ0IsQ0FBRW1CLEVBQUcsR0FBSUMsRUFBRyxJQUFNLENBQUVELEVBQUcsR0FBSUMsRUFBRyxJQUFNLENBQ3BGakIsRUFBZSxFQUFHLEtBRXBCa0IsRUFBcUJoQixFQUFTLENBQUVpQixLQUFNLElBQ3RDQyxFQUFTaEIsRUFBSWlCLFNBQVMsQ0FBRUMsRUFBRyxFQUFHQyxHQUFJLEVBQUdDLEVBQUcsR0FBSyxRQUM3Q0MsRUFBUyxDQUFFSCxHQUFJLEVBQUdDLEVBQUcsRUFBR0MsR0FBSSxHQUM1QkUsRUFBVSxDQUNSdkIsRUFBT3dCLEtBQUssQ0FBRVAsU0FBUUssV0FDdEJ0QixFQUFPeUIsS0FBSyxDQUFFUixTQUFRRCxLQUFNLElBQzVCaEIsRUFBTzBCLFFBQVEsQ0FBRVQsU0FBUUQsS0FBTSxJQUMvQmhCLEVBQU8yQixLQUFLLENBQUVWLFNBQVFLLFNBQVFOLEtBQU0sSUFDcENoQixFQUFPNEIsUUFBUSxDQUFFWCxTQUFRSyxTQUFRTixLQUFNLEtBRXpDYSxFQUFtQkMsU0FBU0MsZUFBZXZCLEdBQzNDd0IsRUFBS0YsU0FBU0MsZUFBZSxhQUN4QixNQUFNRSxPQUFTSCxTQUFTSSxjQUFjLHFCQUMzQ0MsUUFBVSxJQUNELENBQ0x6QyxFQUNFLENBQUVtQixFQUFHVixFQUFZLE9BQVFXLEVBQUdYLEVBQVksUUFDeEMsQ0FBRVUsRUFBR1YsRUFBWSxPQUFRVyxFQUFHWCxFQUFZLFFBQ3hDLENBQ0VSLEVBQWlCTyxFQUFjLGVBQWlCa0MsS0FBS0MsR0FBTSxJQUMzRHpDLEVBQWVNLEVBQWMsT0FBUUEsRUFBYyxRQUNuREwsRUFBZU0sRUFBWSxPQUFRQSxFQUFZLFVBR25ESixFQUFTLENBQ1B1QyxNQUFPbEMsRUFBYyxTQUNyQlksS0FBTSxDQUFDYixFQUFZLE9BQVFBLEVBQVksUUFDdkNvQyxVQUFVLElBRVpqQyxFQUFZLFVBR2hCa0MsUUFBVSxLQUNSLE1BQU1DLEVBQVNOLFVBRWYsSUFBSU8sRUFFSixJQUhXWixTQUFTQyxlQUFlcEIsR0FFNUJnQyxNQUFNQyxNQUFRLEdBQUd2QyxFQUFlLFdBQy9CcUMsRUFBT2IsRUFBaUJnQixXQUM5QmhCLEVBQWlCaUIsWUFBWUosR0FFL0JqRCxFQUFVZSxLQUFrQmlDLEVBQU8sRUFFckNNLFNBQVcsS0FDVCxNQUFPQyxFQUFRQyxHQUFRZCxVQUNyQmUsRUFBUzNELEVBQVlrQixFQUFrQnVDLEdBQ3ZDRyxFQUFNRCxFQUFPRSxXQUFXLE1BSTFCLE9BSGlCdEIsU0FBU0MsZUFBZXRCLEdBQzVCNEMsWUFBWUgsR0FDekIxRCxFQUFrQjJELEVBQUtILEVBQVFDLEdBQ3hCRSxDQUFHLEVBRVpHLFNBQVlILElBQ1YzRCxFQUFrQjJELEtBQVFoQixVQUFVLEVBS3hDTCxTQUFTeUIsaUJBQWlCLG9CQUFvQixLQUM1Q2YsVUFHQSxNQUFNZ0IsRUFBUzFCLFNBQVNDLGVBQWVwQixHQUN2Q0QsRUFBTytDLFNBQVEsQ0FBQ25CLEVBQU9vQixLQUNyQixNQUFNQyxFQUFpQjdCLFNBQVM4QixjQUFjLE9BQzVDQyxFQUFTdEMsRUFBUW1DLEdBQ25CQyxFQUFlRyxHQUFLeEIsRUFDcEJxQixFQUFlaEIsTUFBTW9CLFFBQVUsZUFDL0JQLEVBQU9ILFlBQVlNLEdBQ25CbEUsRUFBVTZDLEVBQU8xQixFQUFtQkcsR0FDbEI0QyxFQUFlekIsY0FDL0Isc0JBQXNCakIsRUFBTzZDLFFBRXJCRSxVQUFVQyxJQUFJLFVBQ3hCSixFQUFPSixTQUFTUyxJQUNkLE1BQU1DLEVBQU9yQyxTQUFTSSxjQUNwQixJQUFJSSx3QkFBNEI0QixFQUFFSixRQUVoQ0ssR0FDRkEsRUFBS0gsVUFBVUMsSUFBSSxRLEdBRXJCLEdBQ0YsSUFHSmhDLE9BQU9zQixpQkFBaUIsU0FBUyxLQUMvQmYsU0FBUyxJQUdYWCxFQUFpQjBCLGlCQUFpQixXQUFZYSxJQUM1QyxJQUFNQSxFQUFHQyxPQUFtQkMsUUFBUSxTQUFVLE9BQzlDLE1BQU90QixHQUFVYixVQUNmb0MsRUFBb0IsQ0FBRTFELEVBQUd1RCxFQUFHSSxRQUFTMUQsRUFBR3NELEVBQUdLLFVBQzNDdEQsRUFBRUEsRUFBQ0MsRUFBRUEsRUFBQ0MsRUFBRUEsR0FBTXZCLEVBQVl5RSxFQUFTdkIsR0FDbkMwQixFQUFLLE1BQU1OLEVBQUdJLGVBQWVKLEVBQUdLLFVBQ2hDRSxFQUFNLE1BQU1wRSxFQUFnQlksVUFBVVosRUFBZ0JhLFVBQVViLEVBQWdCYyxLQUNoRjhDLEVBQVFDLEVBQUdDLE9BQW1CTyxhQUFhLG9CQUM3QzVDLEVBQUc2QyxVQUFZLHNCQUFzQkgsb0NBQ1BDLDhCQUNOUixHQUFNIn0=